<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
  *{margin:0;padding:0;box-sizing:border-box}

  .main{position: relative;margin:0 auto;}
  .main img{
    width:245.272px;
    padding:3px; 
  }
  </style>
</head>
<body>
  <div class="main">
    <img src="./img/u=1058620997,1120035642&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1067702170,1733218393&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1073430552,1501213442&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1073542350,3067615529&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1090539857,1689046890&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1098188988,2329872459&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1141699446,1987774991&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1154899513,1530211594&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1164126217,683816481&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1204563601,4110727302&fm=26&gp=0.jpg" alt="">
   <!-- <img src="./img/u=1214862197,1855985821&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1278581808,3063083686&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1313266883,2538673882&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1326165522,1718102952&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1349060027,1343213129&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1382510830,1988941411&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1594714472,916294131&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1679254714,1052026039&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1691036076,2333546668&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1705712044,2753655931&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1795132867,3423964491&fm=16&gp=0.jpg" alt="">
    <img src="./img/u=1835401533,3319977687&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1846887825,1134062114&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1904961545,3862121606&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1907971607,975632426&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1942637418,2641009681&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1991443868,3131609053&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=2035158536,657929773&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2072609790,1688338278&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2116710437,2810883995&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2188874251,2128823168&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2367320358,955666040&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2425312122,820406704&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2523565779,221256401&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2551102921,661409340&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2593955842,1645853501&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3118987909,4139871116&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3020897783,3788534003&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3015332148,3800440973&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2758429285,899366910&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=2718412320,1654544148&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2612344075,2312982370&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3732103328,2656973767&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3711925516,707913083&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3655035674,3764947093&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3637271123,3081907916&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3592179266,1027450487&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3559263642,477786120&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3554478575,313418038&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3532350117,2487759423&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3488504170,1303717081&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3429717935,1300298503&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3289654082,4027793080&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3167262765,3667852922&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3856831728,737276917&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3759634693,2626735469&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3739589325,1492174020&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=929931246,579923186&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=798248566,2779192838&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=789774083,63327330&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=657572554,970100818&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=51042868,3258692340&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4222715145,1841222541&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=415279402,2091152025&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4145188486,3017659791&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4083232467,1518510837&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4053251128,567877552&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4011606334,4280172087&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=3953490440,227746841&fm=26&gp=0.jpg" alt="">

    <img src="./img/u=1058620997,1120035642&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1067702170,1733218393&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1073430552,1501213442&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1073542350,3067615529&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1090539857,1689046890&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1098188988,2329872459&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1141699446,1987774991&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1154899513,1530211594&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1164126217,683816481&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1204563601,4110727302&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1214862197,1855985821&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1278581808,3063083686&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1313266883,2538673882&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1326165522,1718102952&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1349060027,1343213129&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1382510830,1988941411&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1594714472,916294131&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1679254714,1052026039&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1691036076,2333546668&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1705712044,2753655931&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1795132867,3423964491&fm=16&gp=0.jpg" alt="">
    <img src="./img/u=1835401533,3319977687&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=1846887825,1134062114&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1904961545,3862121606&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1907971607,975632426&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1942637418,2641009681&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=1991443868,3131609053&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=2035158536,657929773&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2072609790,1688338278&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2116710437,2810883995&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2188874251,2128823168&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2367320358,955666040&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2425312122,820406704&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2523565779,221256401&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2551102921,661409340&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2593955842,1645853501&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3118987909,4139871116&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3020897783,3788534003&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3015332148,3800440973&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2758429285,899366910&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=2718412320,1654544148&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=2612344075,2312982370&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3732103328,2656973767&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3711925516,707913083&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3655035674,3764947093&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3637271123,3081907916&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3592179266,1027450487&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3559263642,477786120&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3554478575,313418038&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3532350117,2487759423&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3488504170,1303717081&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3429717935,1300298503&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3289654082,4027793080&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3167262765,3667852922&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3856831728,737276917&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3759634693,2626735469&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=3739589325,1492174020&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=929931246,579923186&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=798248566,2779192838&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=789774083,63327330&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=657572554,970100818&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=51042868,3258692340&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4222715145,1841222541&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=415279402,2091152025&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4145188486,3017659791&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4083232467,1518510837&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4053251128,567877552&fm=26&gp=0.jpg" alt="">
    <img src="./img/u=4011606334,4280172087&fm=15&gp=0.jpg" alt="">
    <img src="./img/u=3953490440,227746841&fm=26&gp=0.jpg" alt=""> -->

  </div>
   
  <script> 
  (function(){
    var data=[];
    var main=document.getElementsByClassName("main")[0];
    var fragment=document.createDocumentFragment();
    var times=0;
    var xhr =new XMLHttpRequest();
    xhr.onreadystatechange=function(){
      if(xhr.readyState==4&&xhr.status==200){
        data=JSON.parse(xhr.responseText); 
        for(var i=0;i<=data.length;i++){
          var img=new Image();
          img.src="./img/"+data[i];
          main.appendChild(img);
        }
      }
    }
    xhr.open("get","data.json",true);
    xhr.send(null);

    /* window.onscroll=function(e){
      for(var i=0;i<=data.length;i++){
          var img=new Image();
          img.src="./img/"+data[i];
          main.appendChild(img);
        }
        // main.appendChild(fragment);
    } */

  })()
  


  window.onload=function(){

    var imgs=document.querySelectorAll(".main img");
    var main=document.getElementsByClassName('main')[0];
    var bodyW=window.getComputedStyle(document.body,null).width;
    // var windowW=window.outerWidth;
    var imgW=window.getComputedStyle(imgs[0],null).width;
    bodyW=parseFloat(bodyW);
    imgW=parseFloat(imgW);
    var cols=parseInt(bodyW/imgW);
    // console.log(bodyW,imgW,cols)
    main.style.width=(imgW*cols)+'px';
    waterfall(imgs,imgW,cols);
  }

  
  function waterfall(imgs,imgW,cols){
    

    var hArr=[];
    [].forEach.call(imgs,(val,index,arr)=>{
      var imgH=window.getComputedStyle(val,null).height;
      // var imgH=val.offsetHeight;
      imgH=parseFloat(imgH);
      if(index<cols){
        hArr[index]=imgH;
        val.style.cssText=`position:absolute;top:0;left:${imgW*index}px`
      }else{
        var minH=Math.min(...hArr);
        var i=hArr.indexOf(minH);
        // console.log(minH)
        val.style.cssText=`position:absolute;top:${minH}px;left:${imgW*i}px`
        hArr[i]+=imgH;
      }
    })
  }
  </script>
</body>
</html>